(function(){var C={lib:{},cmp:{},view:{}},O=Function.prototype.bind?function(a,b){return a.bind(b)}:function(a,b){return function(){return a.apply(b,arguments)}},w=function(a,b,c){a.attachEvent?a.attachEvent("on"+b,c):a.addEventListener(b,c,!1)},D=function(a){return null===a},X=Object.prototype.toString,P=function(){var a={"[object String]":0,"[object Number]":1,"[object Boolean]":2,"[object Object]":3,"[object Function]":4,"[object Array]":5,"[object RegExp]":9,"[object Date]":10};return function(b){if(!b){if(null===
b)return 6;if(void 0===b)return 7}var c=a[X.call(b)];return void 0===c?-1:1==c&&isNaN(b)?8:c}}(),J=function(a){return"string"==typeof a||a===""+a},Y=function(){return String.prototype.trim?function(a){return J(a)?a.trim():a}:function(a){return J(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,""):a}}(),L=function(){var a=/\r/,b={option:function(a){var b=a.getAttribute("value")||a.value;return void 0!=b?b:Y(a.innerText||a.textContent)},select:function(a){for(var b,f=a.options,r=a.selectedIndex,p=(a="select-one"===
a.type||0>r)?null:[],m=a?r+1:f.length,q,x=0>r?m:a?r:0;x<m;x++)if(b=f[x],q=b.disabled||b.parentNode.disabled,(b.selected||x===r)&&!q){b=L(b);if(a)return b;p.push(b)}return p},radio:function(a){return D(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return D(a.getAttribute("value"))?"on":a.value}};return function(c){var e,f;if((e=b[c.type]||b[c.nodeName.toLowerCase()])&&void 0!==(f=e(c,"value")))return f;f=c.value;return J(f)?f.replace(a,""):null==f?"":f}}(),T=function(a){if(a&&void 0!=
!a.length&&a!==""+a){for(var b=[],c=-1,e=a.length>>>0;++c!==e;b[c]=a[c]);return b}return a?[a]:[]},M=Array.prototype.indexOf;M||(M=Array.prototype.indexOf=function(a,b){var c;if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),f=e.length>>>0;if(0===f)return-1;c=+b||0;Infinity===Math.abs(c)&&(c=0);if(c>=f)return-1;for(c=Math.max(0<=c?c:f-Math.abs(c),0);c<f;){if(c in e&&e[c]===a)return c;c++}return-1});var Q=function(){var a={select:function(a,c){for(var e,f,r=a.options,
p=T(c),m=r.length,q,x=-1;m--;)f=r[m],(q=p?-1!=M.call(p,f.value):!1)?(f.setAttribute("selected","selected"),e=!0):f.removeAttribute("selected"),q||D(f.getAttribute("mjs-default-option"))||(x=m);e||(a.selectedIndex=x);return p}};a.radio=a.checkbox=function(a,c){if("object"==typeof c&&5===P(c)){var e;e=L(a);e=c?-1!=M.call(c,e):!1;return a.checked=e}};return function(b,c){if(1===b.nodeType){null===c?c="":1===P(c)&&(c+="");var e=a[b.type]||a[b.nodeName.toLowerCase()];e&&void 0!==e(b,c,"value")||(b.value=
c)}}}(),R=navigator.userAgent.toLowerCase(),Z=function(){var a=parseInt((/android (\d+)/.exec(R)||[])[1],10)||!1;return function(){return a}}(),$=function(){var a=parseInt((/msie (\d+)/.exec(R)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(R)||[])[1],10)||!1);return function(){return a}}(),W=function(){var a={};return function(b){if(void 0===a[b]){if("input"==b&&9==$())return a[b]=!1;var c=document.createElement("div");a[b]=!!("on"+b in c)}return a[b]}}(),ba=function(){var a=/^[\w[:#.][\w\]*^|=!]*$/,
b=/=([^\]]+)/,c=/ *, */,e=/(\([^)]*)\+/,f=/(\[[^\]]+)~/,r=/(~|>|\+)/,p=/ +/,m=/([^[:.#]+)?(?:#([^[:.#]+))?(?:\.([^[:.]+))?(?:\[([^!&^*|$[:=]+)([!$^*|&]?=)?([^:\]]+)?\])?(?::([^(]+)(?:\(([^)]+)\))?)?/,q=/(?:(-?\d*)n)?(?:(%|-)(\d*))?/,x=/\D/,aa=/[^(]*\(([^)]*)\)/,w=/\(.*/,L=/\[([^!~^*|$ [:=]+)([$^*|]?=)?([^ :\]]+)?\]/,N=document,M=!!N.getElementsByClassName,K=!!N.querySelectorAll,A={"first-child":function(a){return a.parentNode.getElementsByTagName("*")[0]!==a},"last-child":function(a){for(;(a=a.nextSibling)&&
1!=a.nodeType;);return!!a},root:function(a){return"html"!==a.nodeName.toLowerCase()},"nth-child":function(a,b){var c=a.nodeIndex||0,d=b[3]=b[3]?("%"===b[2]?-1:1)*b[3]:0,e=b[1];if(c)return!((c+d)%e);var f=a.parentNode.firstChild;c++;do if(1==f.nodeType&&(f.nodeIndex=++c)&&a===f&&(c+d)%e)return 0;while(f=f.nextSibling);return 1},"nth-last-child":function(a,b){var c=a.nodeIndexLast||0,d=b[3]?("%"===b[2]?-1:1)*b[3]:0,f=b[1];if(c)return!((c+d)%f);var e=a.parentNode.lastChild;c++;do if(1==e.nodeType&&(e.nodeLastIndex=
c++)&&a===e&&(c+d)%f)return 0;while(e=e.previousSibling);return 1},empty:function(a){return!!a.firstChild},parent:function(a){return!a.firstChild},"only-child":function(a){return 1!=a.parentNode.getElementsByTagName("*").length},checked:function(a){return!a.checked},lang:function(a,b){return a.lang!==b&&N.documentElement.lang!==b},enabled:function(a){return a.disabled||"hidden"===a.type},disabled:function(a){return!a.disabled},selected:function(a){return!a.selected}},C={},D=function(a){return C[a]||
(C[a]=new RegExp("(^| +)"+a+"($| +)"))},v={"":function(a,b){return null!==a.getAttribute(b)},"=":function(a,b,c){var d;return(d=a.getAttribute(b))&&d===c},"&=":function(a,b,c){var d;return(d=a.getAttribute(b))&&D(c).test(d)},"^=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&!d.indexOf(c)},"$=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&d.indexOf(c)==d.length-c.length},"*=":function(a,b,c){var d;return(d=a.getAttribute(b)+"")&&-1!=d.indexOf(c)},"|=":function(a,b,c){var d;return(d=
a.getAttribute(b)+"")&&(d===c||!!d.indexOf(c+"-"))},"!=":function(a,b,c){var d;return!(d=a.getAttribute(b))||!D(c).test(d)}},J=function(z,E){E=E||N;var h=[],d=null,n,u,y,g,B,s,t;if(K)try{h=T(E.querySelectorAll(z.replace(b,'="$1"')))}catch(J){d=!0}if(!K||d)if(a.test(z))switch(d=0,z.charAt(0)){case "#":d=z.slice(1);h=N.getElementById(d);h.id!==d&&(h=N.all[d]);h=h?[h]:[];break;case ".":n=z.slice(1);if(M)h=T((h=E.getElementsByClassName(n)).length?h:[]);else{n=" "+n+" ";u=E.getElementsByTagName("*");for(y=
0;g=u[y++];)-1!=(" "+g.className+" ").indexOf(n)&&(h[d++]=g);h=d?h:[]}break;case ":":u=E.getElementsByTagName("*");y=0;B=z.replace(aa,"$1");for(s=z.replace(w,"");g=u[y++];)A[s]&&!A[s](g,B)&&(h[d++]=g);h=d?h:[];break;case "[":u=E.getElementsByTagName("*");y=0;g=L.exec(z);n=g[1];t=g[2]||"";for(B=g[3];g=u[y++];)v[t]&&(v[t](g,n,B)||"class"===n&&v[t](g,"className",B))&&(h[d++]=g);h=d?h:[];break;default:h=T((h=E.getElementsByTagName(z)).length?h:[])}else{for(var C=z.split(c),D=C.length-1,R=!!D,O,P,l,V,
F,G,H,I,Q,k,S,U;d=C[D--];){P=(O=d.replace(e,"$1%").replace(f,"$1&").replace(r," $1 ").split(p)).length;y=0;V=" ";for(u=[E];l=O[y++];)if(" "!==l&&">"!==l&&"~"!==l&&"+"!==l&&u){l=l.match(m);F=l[1]||"*";G=l[2];H=l[3]?" "+l[3]+" ":"";n=l[4];t=l[5]||"";s=l[7];B="nth-child"===s||"nth-last-child"===s?q.exec("even"===l[8]&&"2n"||"odd"===l[8]&&"2n%1"||!x.test(l[8])&&"0n%"+l[8]||l[8]):l[8];I=[];d=Q=0;for(S=y==P;k=u[Q++];)switch(V){case " ":U=k.getElementsByTagName(F);for(k=0;g=U[k++];)G&&g.id!==G||H&&-1==(" "+
g.className+" ").indexOf(H)||!(!n||v[t]&&(v[t](g,n,l[6])||"class"===n&&v[t](g,"className",l[6])))||g.yeasss||(A[s]?A[s](g,B):s)||(S&&(g.yeasss=1),I[d++]=g);break;case "~":for(F=F.toLowerCase();(k=k.nextSibling)&&!k.yeasss;)1!=k.nodeType||"*"!==F&&k.nodeName.toLowerCase()!==F||G&&k.id!==G||H&&-1==(" "+k.className+" ").indexOf(H)||!(!n||v[t]&&(v[t](g,n,l[6])||"class"===n&&v[t](g,"className",l[6])))||k.yeasss||(A[s]?A[s](k,B):s)||(S&&(k.yeasss=1),I[d++]=k);break;case "+":for(;(k=k.nextSibling)&&1!=k.nodeType;);
!k||k.nodeName.toLowerCase()!==F.toLowerCase()&&"*"!==F||G&&k.id!==G||H&&-1==(" "+g.className+" ").indexOf(H)||!(!n||v[t]&&(v[t](g,n,l[6])||"class"===n&&v[t](g,"className",l[6])))||k.yeasss||(A[s]?A[s](k,B):s)||(S&&(k.yeasss=1),I[d++]=k);break;case ">":for(U=k.getElementsByTagName(F),y=0;g=U[y++];)g.parentNode!==k||G&&g.id!==G||H&&-1==(" "+g.className+" ").indexOf(H)||!(!n||v[t]&&(v[t](g,n,l[6])||"class"===n&&v[t](g,"className",l[6])))||g.yeasss||(A[s]?A[s](g,B):s)||(S&&(g.yeasss=1),I[d++]=g)}u=I}else V=
l;if(R){if(!u.concat){I=[];for(k=0;g=u[k];)I[k++]=g;u=I}h=u.concat(1==h.length?h[0]:h)}else h=u}for(d=h.length;d--;)h[d].yeasss=h[d].nodeIndex=h[d].nodeIndexLast=null}return h};J.is=function(a,b){var c=J(b,a.parentNode),d,e;d=-1;for(e=c.length;++d<e;)if(c[d]===a)return!0;return!1};return J}(),K=function(a,b,c,e){this.el=a;this.cb=b;this.scb=e;this.cbContext=c;this.inputType=b=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];c=a.type?a.type.toLowerCase():"";this.submittable=
"input"==a.nodeName.toLowerCase()&&"radio"!=c&&"checkbox"!=c;"radio"==b?this.initRadioInput():"checkbox"==b?this.initCheckboxInput():this.initTextInput()};K.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,b=this.listeners,c=this.radio,e=this.el,f,r,p,m;f=0;for(r=b.length;f<r;f++)if("radio"==a)for(p=0,m=c.length;p<m;p++){var q=c[p],x=b[f][0],w=b[f][1];q.detachEvent?q.detachEvent("on"+x,w):q.removeEventListener(x,
w,!1)}else p=e,m=b[f][0],q=b[f][1],p.detachEvent?p.detachEvent("on"+m,q):p.removeEventListener(m,q,!1);delete this.radio;delete this.el;delete this.cb;delete this.cbContext},initRadioInput:function(){var a,b,c;this.radio=a=ba("input[name="+this.el.name+"]");this.onRadioInputChangeDelegate=O(this.onRadioInputChange,this);this.listeners.push(["click",this.onRadioInputChangeDelegate]);b=0;for(c=a.length;b<c;b++)w(a[b],"click",this.onRadioInputChangeDelegate)},initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=
O(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);w(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,b=this,c=b.el,e=b.listeners,f;if(!Z()){var r=function(){a=!0},p=function(){a=!1;m()};e.push(["compositionstart",r]);e.push(["compositionend",p]);w(c,"compositionstart",r);w(c,"compositionend",p)}var m=b.onTextInputChangeDelegate=function(){if(!a)b.onTextInputChange()};if(W("input"))e.push(["input",m]),w(c,"input",
m);else{var q=function(a){f||(f=window.setTimeout(function(){m(a);f=null},0))},r=function(a){a=a||window.event;var c=a.keyCode;if(13==c&&b.submittable&&b.scb)return b.scb.call(b.cbContext,a);91===c||15<c&&19>c||37<=c&&40>=c||q(a)};e.push(["keydown",r]);w(c,"keydown",r);W("paste")&&(e.push(["paste",q]),e.push(["cut",q]),w(c,"paste",q),w(c,"cut",q))}e.push(["change",m]);w(c,"change",m)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=
this.getValue();this.cb&&this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb&&this.cb.call(this.cbContext,a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;a=a.target||a.srcElement;this.cb&&this.cb.call(this.cbContext,a.value)},setValue:function(a){var b=this.inputType,c,e;if("radio"==b)for(b=this.radio,c=0,e=b.length;c<e;c++)b[c].checked=b[c].value==a;else"checkbox"==b?(b=this.el,b.checked=!0===a||a==b.value):Q(this.el,
a)},getValue:function(){var a=this.inputType,b,c;if("radio"==a){a=this.radio;b=0;for(c=a.length;b<c;b++)if(a[b].checked)return a[b].value;return null}return"checkbox"==a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(L(this.el))}};K.getValue=L;K.setValue=Q;C.lib.Input=K;"undefined"!=typeof global?global.MetaphorJs=C:window.MetaphorJs=C})();
