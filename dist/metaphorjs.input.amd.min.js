define("metaphorjs-input",function(){var v=Function.prototype.bind?function(a,c){return a.bind(c)}:function(a,c){return function(){return a.apply(c,arguments)}},l=function(a,c,b){a.attachEvent?a.attachEvent("on"+c,b):a.addEventListener(c,b,!1)},t=function(a){return null===a},n=function(a){return"undefined"==typeof a},p=function(a){return"string"==typeof a},z=function(){return String.prototype.trim?function(a){return p(a)?a.trim():a}:function(a){return p(a)?a.replace(/^\s\s*/,"").replace(/\s\s*$/,
""):a}}(),q=function(){var a=/\r/,c={option:function(b){var a=b.getAttribute("value")||b.value;return null===a||n(a)?z(b.innerText||b.textContent):a},select:function(b){for(var a,c=b.options,h=b.selectedIndex,f=(b="select-one"===b.type||0>h)?null:[],g=b?h+1:c.length,k,m=0>h?g:b?h:0;m<g;m++)if(a=c[m],k=a.disabled||a.parentNode.disabled,(a.selected||m===h)&&!k){a=q(a);if(b)return a;f.push(a)}return f},radio:function(a){return t(a.getAttribute("value"))?"on":a.value},checkbox:function(a){return t(a.getAttribute("value"))?
"on":a.value}};return function(b){var d,e;if((d=c[b.type]||c[b.nodeName.toLowerCase()])&&!n(e=d(b,"value")))return e;e=b.value;return p(e)?e.replace(a,""):null==e?"":e}}(),r=Array.prototype.indexOf;r||(r=Array.prototype.indexOf=function(a,c){var b;if(null==this)throw new TypeError('"this" is null or not defined');var d=Object(this),e=d.length>>>0;if(0===e)return-1;b=+c||0;Infinity===Math.abs(b)&&(b=0);if(b>=e)return-1;for(b=Math.max(0<=b?b:e-Math.abs(b),0);b<e;){if(b in d&&d[b]===a)return b;b++}return-1});
var A=Object.prototype.toString,w=function(a){return"number"==typeof a&&!isNaN(a)},x=function(){var a={select:function(a,b){var d,e,h=a.options,f;if(!b||n(b.length)||p(b))f=b?[b]:[];else{e=[];f=-1;for(var g=b.length>>>0;++f!==g;e[f]=b[f]);f=e}for(var g=h.length,k=-1;g--;)e=h[g],(e.selected=f?-1!=r.call(f,e.value):!1)?d=!0:t(e.getAttribute("mjs-default-option"))||(k=g);d||(a.selectedIndex=k);return f}};a.radio=a.checkbox=function(a,b){if(b&&null!=b&&"object"===typeof b&&w(b.length)&&"[object Array]"==
A.call(b)){var d;d=q(a);d=b?-1!=r.call(b,d):!1;return a.checked=d}};return function(c,b){if(1===c.nodeType){null===b?b="":w(b)&&(b+="");var d=a[c.type]||a[c.nodeName.toLowerCase()];if(!d||n(d(c,b,"value")))c.value=b}}}(),u=navigator.userAgent.toLowerCase(),B=function(){var a=parseInt((/android (\d+)/.exec(u)||[])[1],10)||!1;return function(){return a}}(),C=function(){var a=parseInt((/msie (\d+)/.exec(u)||[])[1],10);isNaN(a)&&(a=parseInt((/trident\/.*; rv:(\d+)/.exec(u)||[])[1],10)||!1);return function(){return a}}(),
y=function(){var a={};return function(c){if(void 0===a[c]){if("input"==c&&9==C())return a[c]=!1;var b=document.createElement("div");a[c]=!!("on"+c in b)}return a[c]}}(),s=function(a,c,b,d){this.el=a;this.cb=c;this.scb=d;this.cbContext=b;this.inputType=c=a.getAttribute("mjs-input-type")||a.type.toLowerCase();this.listeners=[];b=a.type?a.type.toLowerCase():"";this.submittable="input"==a.nodeName.toLowerCase()&&"radio"!=b&&"checkbox"!=b;"radio"==c?this.initRadioInput():"checkbox"==c?this.initCheckboxInput():
this.initTextInput()};s.prototype={el:null,inputType:null,cb:null,scb:null,cbContext:null,listeners:[],radio:null,submittable:!1,destroy:function(){var a=this.inputType,c=this.listeners,b=this.radio,d=this.el,e,h,f,g;e=0;for(h=c.length;e<h;e++)if("radio"==a)for(f=0,g=b.length;f<g;f++){var k=b[f],m=c[e][0],l=c[e][1];k.detachEvent?k.detachEvent("on"+m,l):k.removeEventListener(m,l,!1)}else f=d,g=c[e][0],k=c[e][1],f.detachEvent?f.detachEvent("on"+g,k):f.removeEventListener(g,k,!1);delete this.radio;delete this.el;
delete this.cb;delete this.cbContext},initRadioInput:function(){var a=this.el,c=a.type,a=a.name,b,d,e;this.onRadioInputChangeDelegate=v(this.onRadioInputChange,this);if(document.querySelectorAll)b=document.querySelectorAll("input[name="+a+"]");else{var h=document.getElementsByTagName("input"),f;b=[];d=0;for(e=h.length;d<e;d++)f=h[d],f.type==c&&f.name==a&&b.push(f)}this.radio=b;this.listeners.push(["click",this.onRadioInputChangeDelegate]);d=0;for(e=b.length;d<e;d++)l(b[d],"click",this.onRadioInputChangeDelegate)},
initCheckboxInput:function(){this.onCheckboxInputChangeDelegate=v(this.onCheckboxInputChange,this);this.listeners.push(["click",this.onCheckboxInputChangeDelegate]);l(this.el,"click",this.onCheckboxInputChangeDelegate)},initTextInput:function(){var a=!1,c=this,b=c.el,d=c.listeners,e;if(!B()){var h=function(){a=!0},f=function(){a=!1;g()};d.push(["compositionstart",h]);d.push(["compositionend",f]);l(b,"compositionstart",h);l(b,"compositionend",f)}var g=c.onTextInputChangeDelegate=function(){if(!a)c.onTextInputChange()};
if(y("input"))d.push(["input",g]),l(b,"input",g);else{var k=function(a){e||(e=window.setTimeout(function(){g(a);e=null},0))},h=function(a){a=a||window.event;var b=a.keyCode;if(13==b&&c.submittable&&c.scb)return c.scb.call(c.cbContext,a);91===b||15<b&&19>b||37<=b&&40>=b||k(a)};d.push(["keydown",h]);l(b,"keydown",h);y("paste")&&(d.push(["paste",k]),d.push(["cut",k]),l(b,"paste",k),l(b,"cut",k))}d.push(["change",g]);l(b,"change",g)},processValue:function(a){switch(this.inputType){case "number":a=parseInt(a,
10),isNaN(a)&&(a=0)}return a},onTextInputChange:function(){var a=this.getValue();this.cb.call(this.cbContext,a)},onCheckboxInputChange:function(){var a=this.el;this.cb.call(this.cbContext,a.checked?a.getAttribute("value")||!0:!1)},onRadioInputChange:function(a){a=a||window.event;this.cb.call(this.cbContext,(a.target||a.srcElement).value)},setValue:function(a){var c=this.inputType,b,d;if("radio"==c)for(c=this.radio,b=0,d=c.length;b<d;b++){if(c[b].value==a){c[b].checked=!0;break}}else"checkbox"==c?
(c=this.el,c.checked=!0===a||a==c.value):x(this.el,a)},getValue:function(){var a=this.inputType,c,b;if("radio"==a){a=this.radio;c=0;for(b=a.length;c<b;c++)if(a[c].checked)return a[c].value;return null}return"checkbox"==a?this.el.checked?this.el.getAttribute("value")||!0:!1:this.processValue(q(this.el))}};s.getValue=q;s.setValue=x;return s});
